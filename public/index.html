<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset=utf-8>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Should I take my dog to Fort Funston now?</title>
  <link href="assets/bootstrap/css/bootstrap.css" rel="stylesheet"> 
  <script src="/application.js" type="text/javascript" charset="utf-8"></script>
  <script src="assets/knockout/knockout-2.0.0.js" type="text/javascript" charset="utf-8"></script>	
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <style type="text/css">
	dl.myDl dd {
	    margin-left:120px;
	    margin-top:10px;
	    margin-bottom:10px;
	}

	dl.myDl dt {
	    width:auto;
	}
	
	.maybe{
            color: #c09853;
	}	
	
	
	.answer{
	   margin-top:50px;
	   font-size: 100px; 		
	}

	.no{
  	   color: #b94a48;	
	}	
	
	.yes{
  	   color: #468847;
	}	     
	
	.hidden{
		visibility : hidden;
	}   
	
	.visible{
		visibility:visible;
	}
	
	

   </style>
</head>
<body>
    <div  class="container" >    		
	<h2 style="margin-top:10px">Should I take my dog to Fort Funston right now?</h2>	
	<br />
	<br />
	<div data-bind="if: !app.isRequestComplete()">
		<h3>Hmmmm..let me see...</h3>	
	</div>
	<div data-bind="css: { visible: app.isRequestComplete() }" class="hidden"  >
		<div data-bind="if: !app.isError()">
			<div data-bind="if: evaler.totalScore() >= 0" >
			   <h3 class="answer yes">Yes</h3>
			</div>
			<div data-bind="if: evaler.totalScore() <= -3" >
			   <h3 class="answer no">No</h3>
			</div>		
			<div data-bind="if: evaler.totalScore() < 0 && evaler.totalScore() > -3" >
			   <h3 class="answer maybe">Maybe</h3>
			</div>
		</div>
		<div data-bind="if: app.isError()">
			<h1 class="no">Error occured getting weather data. Try again or go to Fort Funston at own risk.</h1>
		</div>		
		<div style="margin-top:100px;font-size:20px">
		      <dl xmlns="http://www.w3.org/1999/xhtml" class="dl-horizontal myDl"  >
			<dt>Condtions</dt>
			<dd data-bind="text: app.weatherText() , css: { maybe : evaler.weatherScore() < 0, no : evaler.weatherScore() < -1 }" /></dd>
			<dt>Wind</dt>
			<dd data-bind="text: app.windText(), css: { maybe : evaler.windScore() < 0, no : evaler.windScore() < -1 }" /></dd>
			<dt>Temp</dt>
			<dd data-bind="text: app.tempText(), css: { maybe : evaler.tempScore() < 0, no : evaler.tempScore() < -1 }" /></dd>
		      </dl>
		      <div data-bind="text: app.obsTimeText()" style="font-size:small"></div>
	       </div>
		
		<div style="margin-top:90px">
			<dl>
			   <dt>Webcam:</dt>
			   <dd style="margin-left:-5px"><img src="http://www.flyfunston.org/newwebcam/panosmall.jpg"  hspace=5 vspace=5 border="0"></dd>
			</dl>
		</div>
       </div>


    </div>	
</body>
  <script type="text/javascript">
	$(function()  {
           window.App = require("app");
      	   App.init();
	   var viewModel = {
		app : App,
		evaler : App.evaler,
                answerTemplate : function(data){
		    console.log(data)
                    if(data.evaler.totalScore() >= 0)
                    	return "answerYes";		
                    if(data.evaler.totalScore() < -3)
                    	return "answerNo";
                    if(data.evaler.totalScore() < 0 && data.evaler.totalScore() > -3)
                    	return "answerMaybe";
		}
	   };

           ko.applyBindings(viewModel);        
           App.getWeatherData();
         });
   </script>	
</html>
